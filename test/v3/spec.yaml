openapi: '3.0.3'
info:
  description: API
  title: W
  version: '1.0'
paths:
  '/Pet/{id}':
    get:
      x-middlewares:
        - premium
      operationId: getPetById
      description: Get Pet by id
      parameters:
        - name: id
          description: Pet ID
          in: path
          required: true
          schema:
            type: integer
        - name: locale
          description: Locale
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                required:
                  - buttons
                properties:
                  address:
                    type: string
                  advice:
                    $ref: '#/components/schemas/PetAdvice'
                  audio:
                    $ref: '#/components/schemas/PetAudio'
                  buttons:
                    type: array
                    items:
                      $ref: '#/components/schemas/PetButton'
                  description:
                    type: string
                  description_short:
                    type: string
                  id:
                    type: integer
                  images:
                    type: array
                    items:
                      $ref: '#/components/schemas/Image'
                  title:
                    type: string
                  bullets:
                    type: array
                    items:
                      $ref: '#/components/schemas/PetBullet'
        'default':
          $ref: '#/components/responses/Error'
  '/Pet/{id}/audio.mp3':
    get:
      x-middlewares:
        - premium
      operationId: getPetAudioById
      description: Get Pet audio file by id
      parameters:
        - name: id
          description: Pet ID
          in: path
          required: true
          schema:
            type: integer
        - name: locale
          description: Locale
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
        'default':
          $ref: '#/components/responses/Error'
  '/style_{theme}':
    get:
      operationId: getStyle
      description: Get light/dark theme
      parameters:
        - name: theme
          description: Theme
          in: path
          required: true
          schema:
            type: string
            enum:
              - light
              - dark
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                additionalProperties: true
        'default':
          $ref: '#/components/responses/Error'
  '/walk/{id}':
    get:
      operationId: getWalkById
      description: Get walk by id
      parameters:
        - name: id
          description: Walk ID
          in: path
          required: true
          schema:
            type: integer
        - name: locale
          description: Locale
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  description:
                    type: string
                  duration:
                    type: integer
                  id:
                    type: integer
                  image:
                    $ref: '#/components/schemas/Image'
                  length:
                    type: integer
                  map_geo_json:
                    type: string
                  map_image_url:
                    type: string
                  max_zoom:
                    type: number
                  min_zoom:
                    type: number
                  Pets:
                    type: array
                    items:
                      $ref: '#/components/schemas/WalkPet'
                  start_zoom:
                    type: number
                  tags:
                    type: array
                    items:
                      type: string
                  title:
                    type: string
        'default':
          $ref: '#/components/responses/Error'
  '/walks_previews':
    get:
      operationId: getWalksPreview
      description: Get all walks
      parameters:
        - name: iata
          description: IATA
          in: query
          schema:
            type: string
            default: ""
        - name: locale
          description: Locale
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  walks:
                    type: array
                    items:
                      $ref: '#/components/schemas/WalkPreview'
        'default':
          $ref: '#/components/responses/Error'

  '/image':
    post:
      operationId: saveImage
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                required:
                  - image_id
                properties:
                  image_id:
                    type: integer

  '/Pet_bullet':
    post:
      operationId: savePetBullet
      description: Create new Pet bullet
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - color
                - emoji
              properties:
                Pet_id:
                  type: integer
                  description: Skip this parameter to create new bullet
                color:
                  type: string
                  description: In format \#ffeeff
                emoji:
                  type: string
                images:
                  description: Send empty value to keep already saved images
                  type: array
                  items:
                    type: integer
      responses:
        '200':
          description: OK

components:
  responses:
    Error:
      description: 'Error response'
      content:
        application/json:
          schema:
            type: object
            required:
              - message
            properties:
              message:
                type: string
  schemas:
    PetBullet:
      type: object
      required:
        - emoji
        - title
        - text
        - color
      properties:
        images:
          type: array
          items:
            $ref: '#/components/schemas/Image'
        emoji:
          type: string
        title:
          type: string
        text:
          type: string
        color:
          type: string
    Coordinates:
      type: object
      properties:
        latitude:
          type: number
        longitude:
          type: number
    WalkPet:
      type: object
      required:
        - is_key
        - path
        - type
      properties:
        address:
          type: string
        coordinates:
          $ref: '#/components/schemas/Coordinates'
        description:
          type: string
        description_short:
          type: string
        id:
          type: integer
        image:
          $ref: '#/components/schemas/Image'
        is_key:
          type: boolean
        path:
          type: array
          items:
            $ref: '#/components/schemas/Coordinates'
        title:
          type: string
        type:
          type: string
          enum:
            - default
            - top
            - secondary
    PetAdvice:
      type: object
      required:
        - text
        - html_text
      properties:
        author:
          $ref: '#/components/schemas/PetAdviceAuthor'
        text:
          type: string
        html_text:
          type: string
    PetAdviceAuthor:
      type: object
      properties:
        avatar_url:
          type: string
        instagram_url:
          type: string
        name:
          type: string
        role:
          type: string
    PetAudio:
      type: object
      properties:
        duration:
          type: integer
        transcription:
          type: string
        url:
          type: string
    PetButton:
      type: object
      properties:
        coordinates:
          $ref: '#/components/schemas/Coordinates'
        title:
          type: string
        type:
          type: string
        url:
          type: string
    WalkPreview:
      type: object
      properties:
        description:
          type: string
        iata:
          type: string
        id:
          type: integer
        image:
          $ref: '#/components/schemas/Image'
        title:
          type: string
        is_soon:
          type: boolean
    Image:
      type: object
      properties:
        author_name:
          type: string
        author_url:
          type: string
        image_url:
          type: string
        ratio:
          type: number
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer

security:
  - bearerAuth: []